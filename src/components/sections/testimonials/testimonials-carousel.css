@reference "@/assets/styles/global.css";

/* Testimonial Carousel Animation Variables */
:root {
  --testimonial-duration-normal: 300ms;
  --testimonial-duration-short: 200ms;
  --testimonial-timing-function: cubic-bezier(0.16, 1, 0.3, 1);
  --testimonial-timing-function-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
  --testimonial-shadow-normal: 0 4px 14px rgba(0, 0, 0, 0.08);
  --testimonial-shadow-hover: 0 8px 30px rgba(0, 0, 0, 0.12);
}

/* Testimonial Container */
.testimonial-section {
  @apply relative max-w-288 w-full pb-8 my-0 mx-auto;
}

/* Testimonial Heading Animations - Using animations.css */
.testimonial-carousel-container {
  @apply relative min-h-90 overflow-visible select-none cursor-grab;
}

/* Carousel Viewport */
.testimonial-carousel-viewport {
  overflow: hidden;
  border-radius: 1rem;
}

/* Individual Slide */
.testimonial-slide {
  @apply min-w-0 py-0 px-4 select-none contain-style gpu-accelerated;
  flex: 0 0 100%;
  position: absolute;
  width: 100%;
  left: 0;
  top: 0;
  opacity: 0;
  transition: opacity 0.5s var(--testimonial-timing-function);
}

.slide-visible {
  opacity: 1;
  z-index: 1;
}

.testimonial-slide.entering {
  @apply animate-fade-out-up animation-duration-500 fill-forwards;
}

.testimonial-slide.leaving {
  @apply animate-fade-out-down animation-duration-500 fill-forwards;
}

/* Card Design - Single animation for better performance */
.testimonial-card {
  @apply relative backdrop-blur-md contain-content rounded-2xl border border-accent-bg/15 p-8 flex flex-col min-h-87 overflow-hidden opacity-40 gpu-accelerated;
  background: linear-gradient(
    135deg,
    oklch(var(--accent-bg) / 0.08),
    oklch(var(--accent-bg) / 0.03)
  );
  box-shadow: var(--testimonial-shadow-normal);
  transition:
    opacity 0.2s ease,
    box-shadow 0.3s ease;
}

/* Use a single animation for the entire card when visible */
.slide-visible .testimonial-card {
  @apply opacity-100 transition-opacity duration-200 shadow-lg will-change-[opacity_box-shadow];
}

.testimonial-card:hover {
  box-shadow: var(--testimonial-shadow-hover);
}

/* Top accent border - simplified for performance */
.testimonial-accent {
  @apply absolute top-0 left-0 w-full h-1 rounded-tl-md rounded-tr-md bg-gradient-to-r from-accent-text/70 to-accent-title;
}

/* Quote icon - no animation */
.quote-icon {
  @apply w-12 h-12 text-accent-text opacity-80;
}

/* Content - no animation */
.testimonial-content {
  font-size: 1.125rem;
  line-height: 1.7;
  color: var(--foreground);
  flex-grow: 1;
}

/* Author info - no animation */
.testimonial-author-container {
  @apply flex items-center mt-auto pt-5 border-t border-accent-bg/15;
}

.testimonial-author-avatar {
  @apply w-14 h-14 mr-4 rounded-full overflow-hidden border-2 border-accent-text/30 shadow-md;
  background: linear-gradient(
    135deg,
    oklch(var(--accent-bg) / 0.2),
    transparent
  );
}

.testimonial-author-image {
  @apply w-full h-full rounded-full object-cover;
}

.testimonial-author-name {
  @apply font-bold text-xl;
}

.testimonial-author-role {
  @apply text-accent-text/70 text-sm;
}

/* Next/Prev Button */
.testimonial-btn-base {
  @apply pointer-events-auto cursor-pointer absolute top-1/2 -translate-y-1/2 z-10 w-10 h-10 sm:w-12 sm:h-12 flex items-center justify-center rounded-full bg-[oklch(var(--accent-bg)/0.1)] text-[oklch(var(--accent-text))] backdrop-blur-md border border-[oklch(var(--accent-text)/0.15)] opacity-70 transition-all hover:opacity-100 hover:bg-[oklch(var(--accent-bg)/0.2)] hover:scale-105 hover:shadow-[0_0_15px_oklch(var(--accent-text)/0.3)];
}

.testimonial-next {
  @apply right-0;
}

.testimonial-prev {
  @apply left-0;
}

/* Pagination Dots with animations */
.testimonial-pagination {
  @apply flex justify-center mt-8 gap-2   animate-fade-up   animation-duration-500 fill-forwards   animation-delay-300 gpu-accelerated;
}

.testimonial-dot {
  @apply h-3 w-3 rounded-full cursor-pointer bg-accent-text/30;
  transform-origin: center;
  will-change: width, background-color;
  transition:
    width 0.3s var(--testimonial-timing-function-spring),
    background-color 0.3s ease;
}

.testimonial-dot-active {
  @apply w-8 bg-accent-text animate-pulse animation-duration-2000 animate-once;
}

.testimonial-dot-inactive {
  @apply w-3 bg-accent-text/30;
}

/* Accessibility */
@media (prefers-reduced-motion: reduce) {
  .testimonial-card,
  .testimonial-button,
  .testimonial-dot {
    transition: none !important;
    animation: none !important;
    transform: none !important;
    opacity: 1 !important;
  }
}
