---
import SectionTitle from "@/components/SectionTitle.astro";
import ImageSlider from "@/components/slider/ImageSlider";
import data from "@/data";
import { Icon } from "astro-icon/components";
import "./project-showcase.css";
import TechPill from "./TechPill.astro";

export interface Project {
  title: string;
  shortDescription: string;
  imageUrls: string[];
  techStack: string[];
  liveUrl?: string;
  repoUrl?: string;
  imageLayout?: "cover" | "contain";
  backgroundStyle?: string;
  layout?: string;
}

const projects = data.projects as Project[];
---

<section id="projects" class="scroll-mt-20 py-20 md:py-28">
  <div class="container mx-auto px-4">
    <SectionTitle p1="My" p2="Creations" subtitle="A selection of projects where code meets creativity." />

    <div id="project-grid-container" class="grid grid-cols-1 gap-8 md:grid-cols-2 md:gap-10 lg:grid-cols-3">
      {
        projects.map((project, index) => (
          <article class="project-card" style={`--delay: ${index * 0.1}s`}>
            <ImageSlider client:idle title={project.title} images={project.imageUrls} imageLayout={project.imageLayout} />

            <div class="project-info">
              <h3 class="project-title">{project.title}</h3>
              <p class="project-description">{project.shortDescription}</p>

              <div class="project-tech">
                <div class="flex flex-wrap gap-1.5">
                  {project.techStack.map((tech) => (
                    <TechPill name={tech} />
                  ))}
                </div>
              </div>

              <div class="project-links">
                <a href={project.liveUrl} target="_blank" rel="noopener noreferrer" class:list={["project-link", { disabled: !project.liveUrl }]} aria-disabled={!project.liveUrl} title={project.liveUrl ? "View live demo" : "Live demo not available"} onclick={!project.liveUrl ? "return false;" : ""}>
                  <Icon name="mdi:open-in-new" />
                  <span>View Live</span>
                </a>
                <a
                  href={project.repoUrl}
                  target="_blank"
                  rel="noopener noreferrer"
                  class:list={["project-link", { disabled: !project.repoUrl }]}
                  aria-disabled={!project.repoUrl}
                  title={project.repoUrl ? "View source code" : "Source code not available"}
                  onclick={!project.repoUrl ? "return false;" : ""}
                >
                  <Icon name="mdi:github" />
                  <span>Source Code</span>
                </a>
              </div>
            </div>
          </article>
        ))
      }
    </div>
  </div>
</section>
