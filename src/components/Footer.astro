---
import { Icon } from "astro-icon/components";
const currentYear = new Date().getFullYear();

const tech = [
  {
    name: "Astro",
    icon: "simple-icons:astro",
  },
  {
    name: "React",
    icon: "simple-icons:react",
  },
  {
    name: "TailwindCSS",
    icon: "simple-icons:tailwindcss",
  },
];
---

<footer class="relative overflow-hidden pt-16 pb-10 mt-12 bg-gradient-to-t from-background via-background/90 to-transparent">
  <!-- Advanced Background Elements -->
  <div class="absolute inset-0 -z-10 overflow-hidden">
    <!-- Keep custom classes for complex background patterns -->
    <div class="constellation"></div>
    <div class="code-particles"></div>
    <div class="absolute w-[1000px] h-[1000px] opacity-10 top-3/4 hero-ring"></div>
    <div class="absolute top-1/4 right-1/4 gradient-orb"></div>
  </div>

  <!-- Main Footer Content -->
  <div class="container mx-auto px-4 z-10 relative">
    <!-- Interactive Logo -->
    <div class="flex justify-center mb-8">
      <a href="#home" class="group">
        <div class="flex items-center">
          <div class="relative h-10 w-10 mr-3 overflow-hidden transition-transform duration-500 ease-out group-hover:rotate-5 group-hover:scale-105">
            <div class="absolute inset-0 bg-gradient-to-br from-[oklch(var(--accent-300))] to-[oklch(var(--accent-900))] rounded-lg transition-all duration-300"></div>
            <div class="absolute inset-[2px] bg-[rgb(var(--background))] rounded-lg flex items-center justify-center text-xl font-bold text-[oklch(var(--accent-title))]">E</div>
            <div class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-700 shadow-[0_0_20px_5px_oklch(var(--accent-text)/0.5)] rounded-lg"></div>
          </div>
          <h2 class="text-2xl font-bold font-doto transition-all duration-300">
            <span class="text-[oklch(var(--accent-title))] group-hover:text-[oklch(var(--accent-text))] transition-colors duration-300">Ehsan</span>
            <span class="group-hover:tracking-wider transition-all duration-300">Khan</span>
          </h2>
        </div>
      </a>
    </div>

    <!-- Interactive Code Divider -->
    <div class="mx-auto max-w-[500px] rounded-lg overflow-hidden bg-black/20 border border-[oklch(var(--accent-bg)/0.2)] backdrop-blur-sm shadow-md my-8">
      <div class="flex items-center mb-1 px-2 py-1.5 bg-[rgba(30,30,30,0.7)]">
        <div class="w-2.5 h-2.5 rounded-full bg-red-500 mr-1.5"></div>
        <div class="w-2.5 h-2.5 rounded-full bg-yellow-500 mr-1.5"></div>
        <div class="w-2.5 h-2.5 rounded-full bg-green-500 mr-1.5"></div>
        <div class="ml-2 text-xs text-foreground-muted">developer-portfolio</div>
      </div>
      <div class="px-4 py-2 font-mono leading-relaxed">
        <div class="typewriter font-mono text-xs">
          <span class="text-[oklch(var(--accent-text))] mr-2 terminal-prompt">&gt;</span>
          <span class="code-el">&lt;<span class="text-[oklch(var(--accent-title))]">div</span> <span class="text-[oklch(var(--accent-text)/0.8)]">className</span>=<span class="text-[oklch(var(--accent-300))]">"developer"</span>&gt;</span>
          <span class="text-foreground typing-effect">Passionate about creating exceptional web experiences</span>
          <span class="code-el">&lt;/<span class="text-[oklch(var(--accent-title))]">div</span>&gt;</span>
        </div>
      </div>
    </div>

    <!-- Footer bottom -->
    <div class="flex flex-col md:flex-row justify-between items-center pt-4">
      <p class="text-sm text-foreground-muted hover:text-foreground transition-colors duration-300">
        Â© <span class="text-foreground">{currentYear}</span> Ehsan Khan. All rights reserved.
      </p>
      <div class="mt-4 md:mt-0 text-sm text-foreground-muted flex gap-1 items-center">
        <span class="inline-block w-2 h-2 bg-[oklch(var(--accent-text))] rounded-full animate-pulse"></span>
        <span class="flex gap-1 items-center">
          Built with
          <span class="flex items-center ml-2 gap-2.5">
            {
              tech.map((item) => (
                <span
                  class="flex items-center justify-center h-7 w-7 rounded-md bg-[oklch(var(--accent-bg)/0.2)] p-1.5 transition-all duration-300 hover:-translate-y-0.5 hover:text-[oklch(var(--accent-300))] hover:bg-[oklch(var(--accent-bg)/0.3)] hover:shadow-[0_4px_8px_-2px_oklch(var(--accent-bg)/0.5)] relative text-[oklch(var(--accent-text))] tech-icon"
                  title={item.name}
                >
                  <Icon name={item.icon} width={20} height={20} />
                </span>
              ))
            }
          </span>
        </span>
      </div>

      <!-- Easter Egg: Hidden Message -->
      <div class="hidden">Thanks for checking out my code!</div>
    </div>
  </div>
</footer>

<style>
  .constellation {
    position: absolute;
    inset: 0;
    background-image: radial-gradient(oklch(var(--accent-text) / 0.4) 1px, transparent 1px);
    background-size: 25px 25px;
    opacity: 0.1;
  }

  .code-particles {
    position: absolute;
    inset: 0;
    opacity: 0.05;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Ctext x='50%25' y='50%25' font-family='monospace' font-size='10' fill='%23ffffff' text-anchor='middle' dominant-baseline='middle'%3E%7B%7D%3C/text%3E%3Ctext x='20%25' y='30%25' font-family='monospace' font-size='8' fill='%23ffffff' text-anchor='middle' dominant-baseline='middle'%3E%3C/%3E%3C/text%3E%3Ctext x='80%25' y='60%25' font-family='monospace' font-size='12' fill='%23ffffff' text-anchor='middle' dominant-baseline='middle'%3E%28%29%3C/text%3E%3Ctext x='35%25' y='80%25' font-family='monospace' font-size='10' fill='%23ffffff' text-anchor='middle' dominant-baseline='middle'%3E%3D%3E%3C/text%3E%3C/svg%3E");
  }

  .gradient-orb {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    background: radial-gradient(circle, oklch(var(--accent-title)) 0%, transparent 70%);
    filter: blur(40px);
    opacity: 0.15;
    animation: float 20s infinite alternate ease-in-out;
  }

  @keyframes float {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 0.15;
    }
    50% {
      transform: translate(-30px, 20px) scale(1.1);
      opacity: 0.2;
    }
    100% {
      transform: translate(20px, -10px) scale(0.9);
      opacity: 0.1;
    }
  }

  .terminal-prompt {
    animation: blink 2s infinite;
  }

  .typing-effect {
    border-right: 2px solid oklch(var(--accent-text));
    animation:
      typing 4s steps(40) 1s infinite alternate both,
      blink-caret 0.75s step-end infinite;
  }

  @keyframes typing {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }

  @keyframes blink-caret {
    from,
    to {
      border-color: transparent;
    }
    50% {
      border-color: oklch(var(--accent-text));
    }
  }

  .tech-icon:hover::before {
    content: attr(title);
    position: absolute;
    top: -24px;
    font-size: 10px;
    background: oklch(var(--accent-bg) / 0.8);
    color: oklch(var(--accent-text));
    padding: 2px 6px;
    border-radius: 4px;
    white-space: nowrap;
  }
</style>
